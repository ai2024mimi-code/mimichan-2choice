<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>みみちゃん♡2択恋愛診断</title>
<meta name="description" content="直感でAかBを選ぶだけ。今の恋の流れをサクッと診断。結果の続きはLINEで♡">
<meta property="og:title" content="みみちゃん♡2択恋愛診断">
<meta property="og:description" content="待つ？動く？2択でサクッと診断。続きはLINEで♡">
<meta property="og:type" content="website">
<meta name="theme-color" content="#f8a5c2">
<style>
:root{
  --pink:#f8a5c2;  /* やさしいピンク */
  --hot:#f48fb1;   /* 濃いめピンク(枠線) */
  --ink:#333;
  --bg:#fff6fb;
  --card:#fff;
  --shadow:0 10px 25px rgba(255,79,161,.18);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:"Hiragino Kaku Gothic ProN","Yu Gothic","Meiryo",system-ui,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(900px 500px at 80% -10%, #ffe3f1 0%, transparent 60%),
    radial-gradient(1000px 600px at -10% 110%, #ffeaf6 0%, transparent 60%),
    var(--bg);
  display:flex; align-items:center; justify-content:center; padding:16px;
}
.app{
  width:min(720px,100%); background:var(--card); border-radius:22px; border:1px solid #ffe5f1;
  box-shadow:var(--shadow); padding:22px 18px 24px; position:relative; overflow:hidden;
}
h1{margin:6px 0 8px; text-align:center; font-size:clamp(22px,4.5vw,28px); color:var(--hot)}
.lead{margin:0; text-align:center; opacity:.9}

.qbox{margin:14px 0 10px}
.q{margin:10px 0 8px; text-align:center; font-weight:700; font-size:clamp(18px,4vw,22px); color:#a4005a}
.choices{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin:8px 0 0}
.btn{
  border:2px solid var(--hot); background:var(--pink); color:#fff; font-weight:700;
  padding:12px 16px; border-radius:999px; cursor:pointer; box-shadow:0 6px 14px rgba(0,0,0,.06);
  transition:transform .04s, filter .2s; font-size:16px; text-decoration:none; display:inline-block;
}
.btn:active{ transform:translateY(1px) scale(.99) }

.sep{height:1px; background:#ffe1ef; margin:14px 0}
.hidden{display:none !important}

.resultTitle{ font-weight:700; color:#a4005a; display:flex; align-items:center; gap:8px; margin:4px 0 8px }
.resultText{ font-size:16px; line-height:1.8 }
.tags{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px }
.tag{ padding:6px 10px; background:#fff0f7; border:1px dashed #ffc2df; border-radius:999px; font-size:13px }

.ctaBlock{ margin-top:14px; background:#fff; border:1px solid #ffe5f1; border-radius:16px; padding:12px 12px 14px }
.ctaTitle{ font-weight:700; color:#a4005a; margin-bottom:8px; display:flex; align-items:center; gap:8px }
.ctaCol{ display:flex; flex-direction:column; gap:8px }
.cta{
  border:2px solid var(--hot); background:var(--pink); color:#fff; text-align:center;
  padding:12px 16px; border-radius:999px; font-weight:700; text-decoration:none; display:block;
}
.note{ font-size:12px; opacity:.75; margin-top:6px; text-align:center }
.footer{ text-align:center; font-size:12px; opacity:.65; margin-top:12px }
.small{ font-size:12px; opacity:.85; text-align:center; margin-top:10px }
.reset{ margin-top:10px; text-align:center }
.reset .btn{ background:#fff; color:var(--hot) }
</style>
</head>
<body>
  <div class="app" role="application" aria-live="polite">
    <h1>みみちゃん♡2択恋愛診断</h1>
    <p class="lead">直感でAかBを選んでね。結果だけサッと表示されます。</p>

    <!-- 質問エリア（診断後は非表示） -->
    <div id="qArea" class="qbox">
      <div id="qText" class="q">—</div>
      <div class="choices">
        <button class="btn" id="btnA">A：—</button>
        <button class="btn" id="btnB">B：—</button>
      </div>
    </div>

    <!-- 結果エリア（最初は非表示） -->
    <div id="resultArea" class="hidden">
      <div class="sep"></div>
      <div class="resultTitle">💖 診断結果</div>
      <div id="resultText" class="resultText">—</div>
      <div class="tags" id="luckyTags"></div>

      <div class="ctaBlock">
        <div class="ctaTitle">💌 続きはここから（おすすめの流れ）</div>
        <div class="ctaCol">
          <!-- ① LINE -->
          <a class="cta" id="ctaLine" href="#" target="_blank" rel="noopener">① “みみちゃん占い”アプリ<br>本格・毎日版をLINEで始める</a>
          <!-- ② 連携占い -->
          <a class="cta" id="ctaUranai" href="#" target="_blank" rel="noopener nofollow">② 本格占いを試す<br>（連携・通話対応）</a>
          <!-- ③ アプリ -->
          <a class="cta" id="ctaApp" href="#" target="_blank" rel="noopener nofollow">③ 出会いの可能性を広げる<br>（おすすめアプリ）</a>
          <!-- ④ みみちゃん相談 -->
          <a class="cta" id="ctaConsult" href="#" target="_blank" rel="noopener">④ みみちゃんに相談する<br>（初回30分無料）</a>
        </div>
        <div class="note">※ 焦らなくて大丈夫。あなたのペースでOKです。</div>
      </div>

      <p class="small">当たってたら、Threadsで感想書いてね♡</p>
      <div class="reset"><button class="btn" id="again">もう一問 試す</button></div>
    </div>

    <div class="footer">© mimi-chan uranai</div>
  </div>

<script>
/* ===== 設定：リンク ===== */
const LINKS = {
  line: "https://lin.ee/oGt4Qr9e",  // ← ご指定のLINE
  uranai: "https://wild-durian-7e0.notion.site/257f18996dfa80a2a54fe7714630052a?source=copy_link", // ← ご指定の連携占い
  app: "https://wild-durian-7e0.notion.site/40-50-256f18996dfa80ab818bc8cead4ed590?source=copy_link", // 既存のおすすめアプリ
  consult: "https://wild-durian-7e0.notion.site/30-25af18996dfa8010acbccc521eb99f89?source=copy_link" // みみちゃん相談(無料30分)
};

/* ===== 質問プール（20） ===== */
const QUESTIONS = [
  { q: "気になる人にLINEを送るなら…？", a: "即レスする", b: "少し時間を置く" },
  { q: "デートに誘われたとき…？", a: "ストレートにOK", b: "さりげなくOK" },
  { q: "やり取りの頻度は…？", a: "毎日少しずつ", b: "数日に1回ていねいに" },
  { q: "好意の伝え方は…？", a: "言葉で素直に伝える", b: "行動でさりげなく示す" },
  { q: "今日は恋を進めるなら…？", a: "自分から動く", b: "相手の出方を見る" },
  { q: "返信の長さは…？", a: "短くテンポよく", b: "丁寧にまとまった文章" },
  { q: "会話のテーマは…？", a: "相手の好きな話題中心", b: "自分の近況を明るく共有" },
  { q: "会えない日は…？", a: "軽く一言だけ", b: "写真やスタンプで雰囲気を届ける" },
  { q: "次の約束の取り方は…？", a: "日付候補を複数出す", b: "相手の都合をまず聞く" },
  { q: "印象づけるなら…？", a: "身だしなみを少し変える", b: "会話の締めを丁寧にする" },
  { q: "距離の詰め方は…？", a: "共通点を増やす", b: "違いを楽しむ" },
  { q: "不安になったら…？", a: "率直に軽く打ち明ける", b: "一晩寝かせてから話す" },
  { q: "褒め方は…？", a: "具体的に1点褒める", b: "全体の雰囲気を褒める" },
  { q: "写真の送り方は…？", a: "今日の小さな発見を1枚", b: "近況をまとめて2枚" },
  { q: "連絡のタイミングは…？", a: "午前中の落ち着いた時間", b: "夜のほっとする時間" },
  { q: "話題が切れたら…？", a: "質問で広げる", b: "共感で深める" },
  { q: "会う前日の準備は…？", a: "服と髪を整える", b: "話すネタを2つ考える" },
  { q: "相手が忙しそうなら…？", a: "短文＋ねぎらい", b: "返信を待って見守る" },
  { q: "気持ちを確かめたいとき…？", a: "軽くニックネームで呼ぶ", b: "小さなお願いをしてみる" },
  { q: "次の一歩は…？", a: "5行メッセージを送る", b: "15分通話に誘ってみる" }
];

/* ===== 結果テキスト ===== */
const RESULT_TEXT = {
  A: [
    "“待つ”は愛への信頼。今日は受け取る力が整う日。やさしい一言をキャッチして💐",
    "焦らなくて大丈夫。落ち着きが魅力を増す日。心地よい距離感がご縁を守ります。",
    "相手のペースに合わせるほど、あなたの誠実さが伝わります。ゆるやかに◎",
    "一拍置く丁寧さが好印象。短い返信でも“温度”が伝われば十分です。",
    "見守る姿勢が安心感に。共感のひとことが心を近づけます。",
    "今日は整える日。身だしなみ＆睡眠で魅力の底上げを。",
    "タイミングを信じて。自然体のあなたがいちばん惹かれます。",
    "即断より“吟味”が吉。相手の良さを見つけるほど関係が柔らかく。",
    "言葉少なめでもOK。しぐさや表情に想いが宿る日。",
    "優しいリアクションが核心に届く。受け止め上手で♡"
  ],
  B: [
    "“動く”は未来への合図。今日は小さな一歩がご縁を進める日。",
    "短くてもあなた発信が効く日。具体×明るさでスッと伝わります。",
    "候補を2つ出すだけで話が動く。相手は“選びやすさ”に助けられます。",
    "軽いお願いは仲を深める鍵。「これお願いしてもいい？」が◎",
    "リアクション＋質問でキャッチボールが続く日。",
    "姿勢を1cmのばして、笑顔を3秒。会う前の準備で差がつくよ。",
    "一歩の勇気が循環を生む。“ありがとう”を先に置こう。",
    "写真1枚で共通の景色をつくる。会話がふくらむよ。",
    "“また今度ね”を具体に。日時の提案で関係がグッと前に進む。",
    "テンポよく、でも誠実に。あなたの芯が心地よく届きます。"
  ]
};

/* ===== ラッキー要素 ===== */
const LUCKY_COLORS = ["さくらピンク","ミントグリーン","ラベンダー","空色","コーラル","アイスグレー","ネイビー","ハニーイエロー","シャンパンゴールド","ライラック"];
const LUCKY_ITEMS  = ["ハンドクリーム","小さな鏡","ハンカチ","ハーブティー","香水","リップ","ペン","アロマ","目薬","コスメポーチ"];
const LUCKY_SPOTS  = ["静かな角席","カフェの窓際","本屋さん","朝の光","緑の見える場所","駅ホームの端","公園のベンチ","図書館の入口付近","階段の踊り場","神社の鳥居"];

/* ===== ユーティリティ ===== */
const $ = s => document.querySelector(s);
const pick = a => a[Math.floor(Math.random()*a.length)];
function withParams(url, params){
  try{ const u=new URL(url,location.href); Object.entries(params).forEach(([k,v])=>u.searchParams.set(k,v)); return u.toString(); }
  catch{ return url; }
}

/* ===== 初期化：ランダムで1問表示 ===== */
let currentQ = null;
function setRandomQuestion(){
  currentQ = pick(QUESTIONS);
  $("#qText").textContent = currentQ.q;
  $("#btnA").textContent = "A：" + currentQ.a;
  $("#btnB").textContent = "B：" + currentQ.b;
}

/* ===== 選択処理（質問は非表示→結果だけ残す） ===== */
function choose(choice){
  // 質問UIを隠す
  $("#qArea").classList.add("hidden");

  // 結果生成
  const text = pick(RESULT_TEXT[choice] || RESULT_TEXT.A);
  $("#resultText").textContent = text;

  // ラッキー
  const wrap = $("#luckyTags"); wrap.innerHTML="";
  const luck = [
    ["🎨 カラー", pick(LUCKY_COLORS)],
    ["🧸 アイテム", pick(LUCKY_ITEMS)],
    ["📍 スポット", pick(LUCKY_SPOTS)]
  ];
  luck.forEach(([label,val])=>{
    const tag=document.createElement("span");
    tag.className="tag"; tag.textContent=`${label}: ${val}`;
    wrap.appendChild(tag);
  });

  // CTAリンク（順番は ①LINE → ②連携占い → ③アプリ → ④相談）
  const utm = { utm_source:"threads", utm_medium:"2choice", utm_campaign:"mimichan_entry", choice };
  $("#ctaLine").href    = withParams(LINKS.line,    utm);
  $("#ctaUranai").href  = withParams(LINKS.uranai,  utm);
  $("#ctaApp").href     = withParams(LINKS.app,     utm);
  $("#ctaConsult").href = withParams(LINKS.consult, utm);

  // 結果を表示（スクロールはせず、画面レイアウトのまま＝上部が隠れない）
  $("#resultArea").classList.remove("hidden");
}

/* ===== もう一問 ===== */
function resetAll(){
  $("#resultArea").classList.add("hidden");
  setRandomQuestion();
  $("#qArea").classList.remove("hidden");
  // 画面の先頭へ軽く戻す（上部が見切れにくい）
  window.scrollTo({top:0, behavior:"smooth"});
}

/* ===== イベント & 初期表示 ===== */
document.addEventListener("DOMContentLoaded", ()=>{
  setRandomQuestion();
  $("#btnA").addEventListener("click", ()=>choose('A'));
  $("#btnB").addEventListener("click", ()=>choose('B'));
  $("#again").addEventListener("click", resetAll);
});

// 念のためグローバル公開（万一の環境用）
window.choose = choose;
</script>
</body>
</html>
